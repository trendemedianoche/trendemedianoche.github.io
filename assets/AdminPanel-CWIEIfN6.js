import{r,j as e,s as v,u as T}from"./index-CUgLcb1w.js";import{g as I,u as z,c as F,d as M}from"./newsService-CvqEjbi9.js";import{g as _,u as S,c as q,d as D}from"./extraNewsService-DRxN34ZU.js";import{a as R,u as E,r as $,d as L}from"./donationService-A-jiN3Ke.js";import{g as P,m as B,d as H}from"./chatService-fK2F1XuY.js";import{g as G,u as U}from"./aboutService-LX_ber3w.js";const k="trendemedianoche_assets";function V(){const[t,g]=r.useState([]),[h,o]=r.useState(null),[l,m]=r.useState(""),[c,s]=r.useState(""),[d,x]=r.useState(!1),p=r.useRef(null),f=a=>{const u=a.split("/").pop();return u.length>20?`${u.slice(0,12)}â€¦${u.slice(-6)}`:u},C=async()=>{x(!0);const{data:a,error:u}=await v.from("gallery_images").select("*").order("position",{ascending:!0});if(u){m("Error cargando imÃ¡genes"),s("error"),x(!1);return}const j=await Promise.all(a.map(async y=>{const{data:w}=await v.storage.from(k).createSignedUrl(y.path,3600);return w?{...y,url:w.signedUrl}:null}));g(j.filter(Boolean)),x(!1)};r.useEffect(()=>{C()},[]);const n=async()=>{if(!h){m("Selecciona una imagen"),s("error");return}x(!0);const a=`images/${Date.now()}-${h.name}`,{error:u}=await v.storage.from(k).upload(a,h);if(u){m(u.message),s("error"),x(!1);return}const j=Math.max(0,...t.map(y=>y.position||0));await v.from("gallery_images").insert({path:a,position:j+1,active:!0}),o(null),m("âœ“ Imagen subida correctamente"),s("success"),p.current&&(p.current.value=""),C()},i=async a=>{x(!0),await v.from("gallery_images").update({active:!a.active}).eq("id",a.id),C()},b=async(a,u)=>{const j=a+u;if(j<0||j>=t.length)return;const y=t[a],w=t[j];x(!0),await v.from("gallery_images").update({position:-1}).eq("id",y.id),await v.from("gallery_images").update({position:y.position}).eq("id",w.id),await v.from("gallery_images").update({position:w.position}).eq("id",y.id),C()},N=async a=>{window.confirm("Â¿Eliminar esta imagen?")&&(x(!0),await v.storage.from(k).remove([a.path]),await v.from("gallery_images").delete().eq("id",a.id),m("âœ“ Imagen eliminada"),s("success"),C())};return e.jsxs("div",{children:[l&&e.jsx("div",{className:`admin-alert alert-${c}`,children:l}),e.jsxs("div",{className:"admin-card",children:[e.jsx("div",{className:"admin-card-header",children:e.jsx("h2",{className:"admin-card-title",children:" GalerÃ­a"})}),e.jsx("div",{className:"admin-card-body",children:e.jsxs("div",{className:"admin-form",style:{gap:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"photo-upload",children:"Seleccionar Imagen"}),e.jsx("input",{id:"photo-upload",type:"file",ref:p,onChange:a=>o(a.target.files?.[0]||null),disabled:d,accept:"image/*"})]}),h&&e.jsxs("div",{className:"item-card",style:{borderLeft:"4px solid #00a300"},children:[e.jsx("strong",{children:"Archivo seleccionado:"}),e.jsx("p",{children:f(h.name)})]}),e.jsx("button",{className:"btn btn-primary btn-block",onClick:n,disabled:!h||d,children:d?"â³ Subiendo...":"ðŸ“¤ Subir Imagen"})]})})]}),e.jsxs("div",{className:"admin-card",style:{marginTop:"2rem"},children:[e.jsx("div",{className:"admin-card-header",children:e.jsxs("h2",{className:"admin-card-title",children:["ImÃ¡genes (",t.length,")"]})}),t.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-state-icon"}),e.jsx("p",{className:"empty-state-text",children:"No hay imÃ¡genes en la galerÃ­a"})]}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"1.5rem",padding:"1.5rem"},children:t.map((a,u)=>e.jsxs("div",{className:"item-card",style:{display:"flex",flexDirection:"column",padding:"1rem",background:"linear-gradient(180deg, #1a1a1a, #0f0f0f)",border:"1px solid #333",borderRadius:"8px"},children:[a.url&&e.jsx("img",{src:a.url,alt:a.path,style:{width:"100%",height:"180px",objectFit:"cover",borderRadius:"6px",marginBottom:"1rem",opacity:a.active?1:.5,border:a.active?"2px solid #f5c400":"2px solid #555"}}),e.jsxs("div",{style:{marginBottom:"0.8rem"},children:[e.jsx("strong",{style:{fontSize:"0.9rem",color:"#f5f5f5"},children:f(a.path)}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginTop:"0.3rem"},children:[e.jsx("span",{style:{fontSize:"0.75rem",color:"#aaa"},children:new Date(a.created_at).toLocaleDateString()}),!a.active&&e.jsx("span",{className:"badge badge-inactive",style:{fontSize:"0.7rem",padding:"0.2rem 0.5rem",background:"rgba(255,0,0,0.2)",color:"#ff6b6b",borderRadius:"4px"},children:"Inactiva"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:"0.5rem"},children:[e.jsx("button",{className:"btn btn-secondary btn-small",onClick:()=>b(u,-1),disabled:d||u===0,title:"Mover a la izquierda",style:{padding:"0.6rem",fontSize:"0.9rem",display:"flex",alignItems:"center",justifyContent:"center"},children:"â¬…"}),e.jsx("button",{className:"btn btn-secondary btn-small",onClick:()=>b(u,1),disabled:d||u===t.length-1,title:"Mover a la derecha",style:{padding:"0.6rem",fontSize:"0.9rem",display:"flex",alignItems:"center",justifyContent:"center"},children:"âž¡"}),e.jsx("button",{className:"btn btn-success btn-small",onClick:()=>i(a),disabled:d,title:a.active?"Ocultar imagen":"Mostrar imagen",style:{padding:"0.6rem",fontSize:"0.9rem",display:"flex",alignItems:"center",justifyContent:"center"},children:a.active?"ðŸ‘":"ðŸš«"}),e.jsx("button",{className:"btn btn-danger btn-small",onClick:()=>N(a),disabled:d,title:"Eliminar imagen",style:{padding:"0.6rem",fontSize:"0.9rem",display:"flex",alignItems:"center",justifyContent:"center"},children:"ðŸ—‘"})]})]},a.id))})]})]})}function W({activeTab:t,setActiveTab:g,role:h}){const{user:o}=T(),[l,m]=r.useState(null);r.useEffect(()=>{o&&c()},[o]);const c=async()=>{const{data:p}=await v.from("profiles").select("name, role").eq("id",o.id).single();p&&m(p)},s=async()=>{await v.auth.signOut(),window.location.href="/#/login"},d=l?.name||o?.email?.split("@")[0]||"Admin",x=l?.role==="admin"?"Administrador":"Usuario";return e.jsxs("header",{className:"admin-header-modern",children:[e.jsxs("div",{className:"admin-header-left",children:[e.jsxs("div",{className:"admin-logo-combo",children:[e.jsx("div",{className:"admin-logo-icon"}),e.jsx("div",{className:"admin-logo-text"})]}),e.jsxs("div",{className:"admin-title-section",children:[e.jsx("h1",{className:"admin-title",children:"Panel de Control"}),e.jsx("p",{className:"admin-subtitle",children:"GestiÃ³n de Contenido"})]})]}),e.jsxs("div",{className:"admin-header-right",children:[e.jsxs("div",{className:"admin-user-info",children:[e.jsx("span",{className:"user-icon",children:"ðŸ‘¤"}),e.jsxs("div",{className:"user-details",children:[e.jsx("span",{className:"user-name",children:d}),e.jsx("span",{className:"user-role",children:x})]})]}),e.jsx("button",{className:"logout-btn",onClick:s,children:"ðŸšª Cerrar sesiÃ³n"})]})]})}function O(){const[t,g]=r.useState([]),[h,o]=r.useState(null),[l,m]=r.useState(!1),[c,s]=r.useState({title:"",content:"",date:""}),d=async()=>{m(!0);const n=await I();g(n),m(!1)};r.useEffect(()=>{d()},[]);const x=()=>{o(null),s({title:"",content:"",date:""})},p=async n=>{n.preventDefault(),m(!0),h?await z(h.id,c):await F(c),x(),d()},f=n=>{o(n),s({title:n.title,content:n.content,date:n.date})},C=async n=>{window.confirm("Â¿Eliminar noticia?")&&(m(!0),await M(n),d())};return e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2rem"},children:[e.jsxs("div",{className:"admin-card",children:[e.jsx("div",{className:"admin-card-header",children:e.jsx("h2",{className:"admin-card-title",children:h?"âœï¸ Editar":" Nueva Noticia"})}),e.jsxs("form",{className:"admin-form",onSubmit:p,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"title",children:"TÃ­tulo"}),e.jsx("input",{id:"title",type:"text",placeholder:"TÃ­tulo de la noticia",value:c.title,onChange:n=>s({...c,title:n.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"content",children:"Contenido"}),e.jsx("textarea",{id:"content",placeholder:"Contenido de la noticia",value:c.content,onChange:n=>s({...c,content:n.target.value}),required:!0,style:{minHeight:"150px"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"date",children:"Fecha"}),e.jsx("input",{id:"date",type:"date",value:c.date,onChange:n=>s({...c,date:n.target.value}),required:!0})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsx("button",{type:"submit",className:"btn btn-primary btn-block",disabled:l,children:l?"â³ Guardando...":h?"âœ“ Actualizar":"âœ“ Crear"}),h&&e.jsx("button",{type:"button",className:"btn btn-secondary btn-block",onClick:x,children:"âœ• Cancelar"})]})]})]}),e.jsxs("div",{className:"admin-card",children:[e.jsx("div",{className:"admin-card-header",children:e.jsxs("h2",{className:"admin-card-title",children:[" Noticias (",t.length,")"]})}),l?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{className:"empty-state-text",children:"Cargando..."})]}):t.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-state-icon"}),e.jsx("p",{className:"empty-state-text",children:"No hay noticias"})]}):e.jsx("div",{className:"admin-card-body",children:t.map(n=>e.jsxs("div",{className:"item-card",children:[e.jsx("div",{className:"item-header",children:e.jsxs("div",{children:[e.jsx("strong",{style:{color:"#f5c400"},children:n.title}),e.jsx("p",{style:{margin:"0.4rem 0 0 0",color:"#bbb",fontSize:"0.85rem"},children:n.date})]})}),e.jsxs("p",{style:{margin:"0.8rem 0",fontSize:"0.9rem",color:"#ddd",lineHeight:"1.5"},children:[n.content.substring(0,100),"..."]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{className:"btn btn-secondary btn-small",onClick:()=>f(n),disabled:l,children:"âœï¸ Editar"}),e.jsx("button",{className:"btn btn-danger btn-small",onClick:()=>C(n.id),disabled:l,children:"ðŸ—‘ Eliminar"})]})]},n.id))})]})]})}function K(){const[t,g]=r.useState([]),[h,o]=r.useState(null),[l,m]=r.useState(!1),[c,s]=r.useState({icon:"",content:"",active:!0}),d=async()=>{m(!0);const i=await _();g(i),m(!1)};r.useEffect(()=>{d()},[]);const x=async i=>{if(i.preventDefault(),m(!0),h)await S(h.id,c);else{const b=t.length>0?Math.max(...t.map(N=>N.position))+1:1;await q({...c,position:b})}s({icon:"",content:"",active:!0}),o(null),d()},p=i=>{o(i),s({icon:i.icon,content:i.content,active:i.active})},f=async i=>{window.confirm("Â¿Eliminar?")&&(m(!0),await D(i),d())},C=async i=>{m(!0),await S(i.id,{active:!i.active}),d()},n=async(i,b)=>{const N=i+b;if(N<0||N>=t.length)return;const a=t[i],u=t[N];m(!0),await S(a.id,{position:-1}),await S(u.id,{position:a.position}),await S(a.id,{position:u.position}),d()};return e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2rem"},children:[e.jsxs("div",{className:"admin-card",children:[e.jsx("div",{className:"admin-card-header",children:e.jsx("h2",{className:"admin-card-title",children:h?"âœï¸ Editar":" Nueva Extra"})}),e.jsxs("form",{className:"admin-form",onSubmit:x,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"icon",children:"Icono"}),e.jsx("input",{id:"icon",type:"text",placeholder:"Ej: ðŸ”¥ ðŸ“… âš¡",value:c.icon,onChange:i=>s({...c,icon:i.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"content",children:"Contenido"}),e.jsx("textarea",{id:"content",placeholder:"Contenido del anuncio",value:c.content,onChange:i=>s({...c,content:i.target.value}),required:!0,style:{minHeight:"100px"}})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.95rem",color:"#f5c400",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:c.active,onChange:i=>s({...c,active:i.target.checked})}),"Activo"]}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsx("button",{type:"submit",className:"btn btn-primary btn-block",disabled:l,children:l?"â³ Guardando...":h?"âœ“ Actualizar":"âœ“ Crear"}),h&&e.jsx("button",{type:"button",className:"btn btn-secondary btn-block",onClick:()=>{o(null),s({icon:"",content:"",active:!0})},children:"âœ• Cancelar"})]})]})]}),e.jsxs("div",{className:"admin-card",children:[e.jsx("div",{className:"admin-card-header",children:e.jsxs("h2",{className:"admin-card-title",children:[" Extra (",t.length,")"]})}),l?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{className:"empty-state-text",children:"Cargando..."})]}):t.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-state-icon"}),e.jsx("p",{className:"empty-state-text",children:"No hay extras"})]}):e.jsx("div",{className:"admin-card-body",children:t.map((i,b)=>e.jsxs("div",{className:"item-card",children:[e.jsx("div",{className:"item-header",children:e.jsxs("div",{children:[e.jsxs("strong",{style:{color:"#f5c400",fontSize:"1.1rem"},children:[i.icon," ",i.content.substring(0,40),"..."]}),!i.active&&e.jsx("span",{className:"badge badge-inactive",children:"Inactivo"})]})}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[e.jsx("button",{className:"btn btn-secondary btn-small",onClick:()=>n(b,-1),disabled:l||b===0,title:"Subir",children:"â¬†"}),e.jsx("button",{className:"btn btn-secondary btn-small",onClick:()=>n(b,1),disabled:l||b===t.length-1,title:"Bajar",children:"â¬‡"}),e.jsx("button",{className:"btn btn-success btn-small",onClick:()=>C(i),disabled:l,children:i.active?"ðŸ‘":"ðŸš«"}),e.jsx("button",{className:"btn btn-secondary btn-small",onClick:()=>p(i),disabled:l,children:"âœï¸"}),e.jsx("button",{className:"btn btn-danger btn-small",onClick:()=>f(i.id),disabled:l,children:"ðŸ—‘"})]})]},i.id))})]})]})}function J(){const[t,g]=r.useState([]),[h,o]=r.useState(null),[l,m]=r.useState(!1),[c,s]=r.useState(null),[d,x]=r.useState("");r.useEffect(()=>{p()},[]);const p=async()=>{m(!0);const a=await R();g(a.fields),o(a.methodId),m(!1)},f=async a=>{m(!0),await E(a.id,{visible:!a.visible}),p()},C=async(a,u)=>{m(!0),await E(a,{field_value:u}),s(null),x(""),p()},n=a=>{s(a.id),x(a.field_value)},i=()=>{s(null),x("")},b=async(a,u)=>{const j=[...t],y=a+u;y<0||y>=j.length||([j[a],j[y]]=[j[y],j[a]],m(!0),g(j),await $(j),p())},N=async a=>{window.confirm("Â¿Eliminar campo?")&&(m(!0),await L(a),p())};return e.jsxs("div",{className:"admin-card",children:[e.jsx("div",{className:"admin-card-header",children:e.jsxs("h2",{className:"admin-card-title",children:[" Datos de DonaciÃ³n (",t.length,")"]})}),l?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{className:"empty-state-text",children:"Cargando..."})]}):t.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-state-icon"}),e.jsx("p",{className:"empty-state-text",children:"No hay campos"})]}):e.jsx("div",{className:"admin-card-body",children:t.map((a,u)=>e.jsxs("div",{className:"item-card",children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#f5c400",fontSize:"0.9rem"},children:a.field_key}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.jsx("input",{type:"text",value:c===a.id?d:a.field_value,onChange:j=>x(j.target.value),disabled:c!==a.id,style:{flex:1,padding:"0.6rem",border:"1px solid #333",background:c===a.id?"#1a1a1a":"#0d0d0d",color:"#f5f5f5",borderRadius:"4px",fontSize:"0.95rem",opacity:c===a.id?1:.7}}),c===a.id?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-success btn-small",onClick:()=>C(a.id,d),disabled:l,title:"Guardar",children:"ðŸ’¾"}),e.jsx("button",{className:"btn btn-secondary btn-small",onClick:i,disabled:l,title:"Cancelar",children:"âœ•"})]}):e.jsx("button",{className:"btn btn-primary btn-small",onClick:()=>n(a),disabled:l||c!==null,title:"Editar",children:"âœï¸"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[e.jsx("button",{className:"btn btn-secondary btn-small",onClick:()=>b(u,-1),disabled:l||u===0,title:"Subir",children:"â¬†"}),e.jsx("button",{className:"btn btn-secondary btn-small",onClick:()=>b(u,1),disabled:l||u===t.length-1,title:"Bajar",children:"â¬‡"}),e.jsx("button",{className:"btn btn-success btn-small",onClick:()=>f(a),disabled:l,children:a.visible?"ðŸ‘":"ðŸš«"}),e.jsx("button",{className:"btn btn-danger btn-small",onClick:()=>N(a.id),disabled:l,children:"ðŸ—‘"})]})]},a.id))})]})}function Q(){const[t,g]=r.useState([]),[h,o]=r.useState(!1),l=async()=>{o(!0);const{data:s,error:d}=await v.from("site_sections").select("*").order("position");if(d){console.error("Error loading sections:",d),o(!1);return}g(s),o(!1)};r.useEffect(()=>{l()},[]);const m=async s=>{o(!0),await v.from("site_sections").update({active:!s.active}).eq("id",s.id),l()},c=async(s,d)=>{const x=s+d;if(x<0||x>=t.length)return;const p=t[s],f=t[x];o(!0),await v.from("site_sections").update({position:-1}).eq("id",p.id),await v.from("site_sections").update({position:p.position}).eq("id",f.id),await v.from("site_sections").update({position:f.position}).eq("id",p.id),l()};return e.jsxs("div",{className:"admin-card",children:[e.jsx("div",{className:"admin-card-header",children:e.jsxs("h2",{className:"admin-card-title",children:[" Secciones del Sitio (",t.length,")"]})}),h?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{className:"empty-state-text",children:"Cargando..."})]}):t.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-state-icon"}),e.jsx("p",{className:"empty-state-text",children:"No hay secciones"})]}):e.jsx("div",{className:"admin-card-body",children:t.map((s,d)=>e.jsxs("div",{className:"item-card",children:[e.jsxs("div",{children:[e.jsx("strong",{style:{color:"#f5c400",fontSize:"1.05rem"},children:s.label}),e.jsx("p",{style:{color:"#999",fontSize:"0.85rem",margin:"0.3rem 0 0 0"},children:s.key}),!s.active&&e.jsx("span",{className:"badge badge-inactive",children:"Inactivo"})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[e.jsx("button",{className:"btn btn-secondary btn-small",onClick:()=>c(d,-1),disabled:h||d===0,title:"Subir",children:"â¬†"}),e.jsx("button",{className:"btn btn-secondary btn-small",onClick:()=>c(d,1),disabled:h||d===t.length-1,title:"Bajar",children:"â¬‡"}),e.jsx("button",{className:"btn btn-success btn-small",onClick:()=>m(s),disabled:h,children:s.active?"ðŸ‘":"ðŸš«"})]})]},s.id))})]})}function A(){const[t,g]=r.useState([]),[h,o]=r.useState(!1),l=async()=>{o(!0);const s=await P();g(s),o(!1)};r.useEffect(()=>{l()},[]);const m=async s=>{await B(s),l()},c=async s=>{window.confirm("Â¿Eliminar este mensaje?")&&(await H(s),l())};return e.jsx("div",{children:e.jsxs("div",{className:"admin-card",children:[e.jsx("div",{className:"admin-card-header",children:e.jsx("h2",{className:"admin-card-title",children:" Mensajes de Chat"})}),h?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{className:"empty-state-text",children:"Cargando mensajes..."})]}):t.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-state-icon"}),e.jsx("p",{className:"empty-state-text",children:"No hay mensajes"})]}):e.jsx("div",{className:"admin-card-body",children:t.map(s=>e.jsxs("div",{className:"message-item",children:[e.jsxs("div",{className:"message-header",children:[e.jsx("strong",{style:{color:"#f5c400"},children:s.name}),e.jsx("span",{style:{fontSize:"0.85rem",color:"#bbb"},children:s.email})]}),e.jsx("p",{style:{margin:"0.8rem 0",lineHeight:"1.6"},children:s.message}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[!s.read&&e.jsx("button",{className:"btn btn-success btn-small",onClick:()=>m(s.id),children:"âœ“ Marcar leÃ­do"}),s.read&&e.jsx("span",{className:"badge badge-active",children:"LeÃ­do"}),e.jsx("button",{className:"btn btn-danger btn-small",onClick:()=>c(s.id),children:"ðŸ—‘ Eliminar"})]})]},s.id))})]})})}function X(){const[t,g]=r.useState(""),[h,o]=r.useState(!0),[l,m]=r.useState(!1),[c,s]=r.useState(""),d=r.useRef(null);r.useEffect(()=>{x()},[]);const x=async()=>{o(!0);try{console.log("ðŸ“– AboutAdmin: Cargando contenido...");const n=await G();console.log("ðŸ“– AboutAdmin: Contenido recibido:",n?.substring(0,100)),g(n)}catch(n){console.error("ðŸ“– AboutAdmin: Error al cargar:",n),s("âŒ Error al cargar el contenido: "+n.message)}finally{o(!1)}},p=async n=>{n.preventDefault(),m(!0),s("");try{console.log("ðŸ’¾ AboutAdmin: Guardando contenido...",{length:t.length}),await U(t),console.log("ðŸ’¾ AboutAdmin: Guardado exitoso"),s(" Contenido actualizado correctamente"),setTimeout(()=>s(""),3e3)}catch(i){console.error("ðŸ’¾ AboutAdmin: Error al guardar:",i),s("âŒ Error al guardar: "+i.message)}finally{m(!1)}},f=n=>{const i=d.current;if(!i)return;const b=i.selectionStart,N=i.selectionEnd,a=t.substring(b,N);if(a){const u=t.substring(0,b),j=t.substring(N),y=`${u}<${n}>${a}</${n}>${j}`;g(y),setTimeout(()=>{i.focus();const w=b+n.length+2+a.length;i.setSelectionRange(w,w)},0)}},C=(n,i="")=>{const b=d.current;if(!b)return;const N=b.selectionStart,a=b.selectionEnd,u=t.substring(0,N),j=t.substring(a),y=`${u}${n}${i}${j}`;g(y),setTimeout(()=>{b.focus();const w=N+n.length;b.setSelectionRange(w,w)},0)};return h?e.jsx("div",{className:"admin-loading",children:"Cargando..."}):e.jsxs("div",{className:"admin-card",children:[e.jsx("div",{className:"admin-card-header",children:e.jsx("h2",{className:"admin-card-title",children:" Editar Acerca de"})}),e.jsxs("div",{className:"admin-preview",children:[e.jsx("h3",{children:"Vista Previa"}),e.jsx("div",{className:"about-preview-content",dangerouslySetInnerHTML:{__html:t}})]}),e.jsxs("form",{onSubmit:p,className:"admin-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"about-content",children:"Contenido HTML"}),e.jsxs("div",{className:"text-editor-toolbar",children:[e.jsx("button",{type:"button",onClick:()=>f("strong"),title:"Negrita",className:"toolbar-btn",children:e.jsx("strong",{children:"B"})}),e.jsx("button",{type:"button",onClick:()=>f("em"),title:"Cursiva",className:"toolbar-btn",children:e.jsx("em",{children:"I"})}),e.jsx("button",{type:"button",onClick:()=>f("s"),title:"Tachado",className:"toolbar-btn",children:e.jsx("s",{children:"S"})}),e.jsx("span",{className:"toolbar-divider",children:"|"}),e.jsx("button",{type:"button",onClick:()=>f("h2"),title:"TÃ­tulo 2",className:"toolbar-btn",children:"H2"}),e.jsx("button",{type:"button",onClick:()=>f("h3"),title:"TÃ­tulo 3",className:"toolbar-btn",children:"H3"}),e.jsx("button",{type:"button",onClick:()=>f("p"),title:"PÃ¡rrafo",className:"toolbar-btn",children:"P"}),e.jsx("span",{className:"toolbar-divider",children:"|"}),e.jsx("button",{type:"button",onClick:()=>C("<br>"),title:"Salto de lÃ­nea",className:"toolbar-btn",children:"BR"}),e.jsx("button",{type:"button",onClick:()=>C("<small>","</small>"),title:"Texto pequeÃ±o",className:"toolbar-btn",children:e.jsx("small",{children:"small"})})]}),e.jsx("textarea",{ref:d,id:"about-content",value:t,onChange:n=>g(n.target.value),rows:20,className:"admin-textarea",placeholder:"Escribe el contenido en HTML..."}),e.jsx("small",{className:"form-hint",children:"Selecciona texto y usa la barra de herramientas para aplicar formato HTML"})]}),c&&e.jsx("div",{className:`admin-message ${c.includes("")?"success":"error"}`,children:c}),e.jsxs("div",{className:"admin-actions",children:[e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:l,children:l?"Guardando...":"ðŸ’¾ Guardar Cambios"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:x,disabled:l,children:"ðŸ”„ Recargar"})]})]})]})}const Y=[{id:"chat",label:"Chat",icon:""},{id:"photos",label:"Fotos",icon:""},{id:"sections",label:"Secciones",icon:""},{id:"about",label:"Acerca de",icon:""},{id:"news",label:"Noticias",icon:""},{id:"extra-news",label:"Extra",icon:""},{id:"donation",label:"Donaciones",icon:""}];function ie(){const[t,g]=r.useState("chat"),h=()=>{switch(t){case"chat":return e.jsx(A,{});case"photos":return e.jsx(V,{});case"sections":return e.jsx(Q,{});case"about":return e.jsx(X,{});case"news":return e.jsx(O,{});case"extra-news":return e.jsx(K,{});case"donation":return e.jsx(J,{});default:return e.jsx(A,{})}};return e.jsxs("div",{className:"admin-layout-modern",children:[e.jsx(W,{activeTab:t,setActiveTab:g}),e.jsxs("div",{className:"admin-container",children:[e.jsx("aside",{className:"admin-sidebar",children:e.jsx("nav",{className:"admin-nav",children:Y.map(o=>e.jsxs("button",{className:`admin-nav-item ${t===o.id?"active":""}`,onClick:()=>g(o.id),title:o.label,children:[e.jsx("span",{className:"nav-icon",children:o.icon}),e.jsx("span",{className:"nav-label",children:o.label})]},o.id))})}),e.jsx("main",{className:"admin-content-modern",children:e.jsx("div",{className:"content-wrapper",children:h()})})]})]})}export{ie as default};
