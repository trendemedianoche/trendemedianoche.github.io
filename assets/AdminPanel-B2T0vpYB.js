import{r as c,j as e,s as v,u as T}from"./index-BdLs0ZPF.js";import{g as I,u as z,c as M,d as F}from"./newsService-BX5eE371.js";import{g as _,u as S,c as q,d as D}from"./extraNewsService-BNPgQ12p.js";import{a as R,u as E,r as $,d as L}from"./donationService-XSreRGDa.js";import{g as P,m as B,d as H}from"./chatService-DpV74Hc_.js";import{g as G,u as U}from"./aboutService-Bs8lw5fe.js";const k="trendemedianoche_assets";function V(){const[t,p]=c.useState([]),[h,d]=c.useState(null),[l,u]=c.useState(""),[o,a]=c.useState(""),[m,x]=c.useState(!1),f=c.useRef(null),r=i=>{const b=i.split("/").pop();return b.length>20?`${b.slice(0,12)}â€¦${b.slice(-6)}`:b},g=async()=>{x(!0);const{data:i,error:b}=await v.from("gallery_images").select("*").order("position",{ascending:!0});if(b){u("Error cargando imÃ¡genes"),a("error"),x(!1);return}const C=await Promise.all(i.map(async y=>{const{data:w}=await v.storage.from(k).createSignedUrl(y.path,3600);return w?{...y,url:w.signedUrl}:null}));p(C.filter(Boolean)),x(!1)};c.useEffect(()=>{g()},[]);const s=async()=>{if(!h){u("Selecciona una imagen"),a("error");return}x(!0);const i=`images/${Date.now()}-${h.name}`,{error:b}=await v.storage.from(k).upload(i,h);if(b){u(b.message),a("error"),x(!1);return}const C=Math.max(0,...t.map(y=>y.position||0));await v.from("gallery_images").insert({path:i,position:C+1,active:!0}),d(null),u("âœ“ Imagen subida correctamente"),a("success"),f.current&&(f.current.value=""),g()},n=async i=>{x(!0),await v.from("gallery_images").update({active:!i.active}).eq("id",i.id),g()},j=async(i,b)=>{const C=i+b;if(C<0||C>=t.length)return;const y=t[i],w=t[C];x(!0),await v.from("gallery_images").update({position:-1}).eq("id",y.id),await v.from("gallery_images").update({position:y.position}).eq("id",w.id),await v.from("gallery_images").update({position:w.position}).eq("id",y.id),g()},N=async i=>{window.confirm("Â¿Eliminar esta imagen?")&&(x(!0),await v.storage.from(k).remove([i.path]),await v.from("gallery_images").delete().eq("id",i.id),u("âœ“ Imagen eliminada"),a("success"),g())};return e.jsxs("div",{children:[l&&e.jsx("div",{className:`admin-alert alert-${o}`,children:l}),e.jsxs("div",{className:"admin-card",children:[e.jsx("div",{className:"admin-card-header",children:e.jsx("h2",{className:"admin-card-title",children:" GalerÃ­a"})}),e.jsx("div",{className:"admin-card-body",children:e.jsxs("div",{className:"admin-form",style:{gap:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"photo-upload",children:"Seleccionar Imagen"}),e.jsx("input",{id:"photo-upload",type:"file",ref:f,onChange:i=>d(i.target.files?.[0]||null),disabled:m,accept:"image/*"})]}),h&&e.jsxs("div",{className:"item-card",style:{borderLeft:"4px solid #00a300"},children:[e.jsx("strong",{children:"Archivo seleccionado:"}),e.jsx("p",{children:r(h.name)})]}),e.jsx("button",{className:"btn btn-primary btn-block",onClick:s,disabled:!h||m,children:m?"â³ Subiendo...":"ðŸ“¤ Subir Imagen"})]})})]}),e.jsxs("div",{className:"admin-card",style:{marginTop:"2rem"},children:[e.jsx("div",{className:"admin-card-header",children:e.jsxs("h2",{className:"admin-card-title",children:["ImÃ¡genes (",t.length,")"]})}),t.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-state-icon"}),e.jsx("p",{className:"empty-state-text",children:"No hay imÃ¡genes en la galerÃ­a"})]}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"1.5rem",padding:"1.5rem"},children:t.map((i,b)=>e.jsxs("div",{className:"item-card",style:{display:"flex",flexDirection:"column",padding:"1rem",background:"linear-gradient(180deg, #1a1a1a, #0f0f0f)",border:"1px solid #333",borderRadius:"8px"},children:[i.url&&e.jsx("img",{src:i.url,alt:i.path,style:{width:"100%",height:"180px",objectFit:"cover",borderRadius:"6px",marginBottom:"1rem",opacity:i.active?1:.5,border:i.active?"2px solid #f5c400":"2px solid #555"}}),e.jsxs("div",{style:{marginBottom:"0.8rem"},children:[e.jsx("strong",{style:{fontSize:"0.9rem",color:"#f5f5f5"},children:r(i.path)}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginTop:"0.3rem"},children:[e.jsx("span",{style:{fontSize:"0.75rem",color:"#aaa"},children:new Date(i.created_at).toLocaleDateString()}),!i.active&&e.jsx("span",{className:"badge badge-inactive",style:{fontSize:"0.7rem",padding:"0.2rem 0.5rem",background:"rgba(255,0,0,0.2)",color:"#ff6b6b",borderRadius:"4px"},children:"Inactiva"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:"0.5rem"},children:[e.jsx("button",{className:"btn btn-secondary btn-small",onClick:()=>j(b,-1),disabled:m||b===0,title:"Mover a la izquierda",style:{padding:"0.6rem",fontSize:"0.9rem",display:"flex",alignItems:"center",justifyContent:"center"},children:"â¬…"}),e.jsx("button",{className:"btn btn-secondary btn-small",onClick:()=>j(b,1),disabled:m||b===t.length-1,title:"Mover a la derecha",style:{padding:"0.6rem",fontSize:"0.9rem",display:"flex",alignItems:"center",justifyContent:"center"},children:"âž¡"}),e.jsx("button",{className:"btn btn-success btn-small",onClick:()=>n(i),disabled:m,title:i.active?"Ocultar imagen":"Mostrar imagen",style:{padding:"0.6rem",fontSize:"0.9rem",display:"flex",alignItems:"center",justifyContent:"center"},children:i.active?"ðŸ‘":"ðŸš«"}),e.jsx("button",{className:"btn btn-danger btn-small",onClick:()=>N(i),disabled:m,title:"Eliminar imagen",style:{padding:"0.6rem",fontSize:"0.9rem",display:"flex",alignItems:"center",justifyContent:"center"},children:"ðŸ—‘"})]})]},i.id))})]})]})}function W({activeTab:t,setActiveTab:p,role:h}){const{user:d}=T(),[l,u]=c.useState(null);c.useEffect(()=>{d&&o()},[d]);const o=async()=>{const{data:f}=await v.from("profiles").select("name, role").eq("id",d.id).single();f&&u(f)},a=async()=>{await v.auth.signOut(),window.location.href="/#/login"},m=l?.name||d?.email?.split("@")[0]||"Admin",x=l?.role==="admin"?"Administrador":"Usuario";return e.jsxs("header",{className:"admin-header-modern",children:[e.jsxs("div",{className:"admin-header-left",children:[e.jsxs("div",{className:"admin-logo-combo",children:[e.jsx("div",{className:"admin-logo-icon"}),e.jsx("div",{className:"admin-logo-text"})]}),e.jsxs("div",{className:"admin-title-section",children:[e.jsx("h1",{className:"admin-title",children:"Panel de Control"}),e.jsx("p",{className:"admin-subtitle",children:"GestiÃ³n de Contenido"})]})]}),e.jsxs("div",{className:"admin-header-right",children:[e.jsxs("div",{className:"admin-user-info",children:[e.jsx("span",{className:"user-icon",children:"ðŸ‘¤"}),e.jsxs("div",{className:"user-details",children:[e.jsx("span",{className:"user-name",children:m}),e.jsx("span",{className:"user-role",children:x})]})]}),e.jsx("button",{className:"logout-btn",onClick:a,children:"ðŸšª Cerrar sesiÃ³n"})]})]})}function O(){const[t,p]=c.useState([]),[h,d]=c.useState(null),[l,u]=c.useState(!1),[o,a]=c.useState({title:"",content:"",date:""}),m=async()=>{u(!0);const s=await I();p(s),u(!1)};c.useEffect(()=>{m()},[]);const x=()=>{d(null),a({title:"",content:"",date:""})},f=async s=>{s.preventDefault(),u(!0),h?await z(h.id,o):await M(o),x(),m()},r=s=>{d(s),a({title:s.title,content:s.content,date:s.date})},g=async s=>{window.confirm("Â¿Eliminar noticia?")&&(u(!0),await F(s),m())};return e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2rem"},children:[e.jsxs("div",{className:"admin-card",children:[e.jsx("div",{className:"admin-card-header",children:e.jsx("h2",{className:"admin-card-title",children:h?"âœï¸ Editar":" Nueva Noticia"})}),e.jsxs("form",{className:"admin-form",onSubmit:f,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"title",children:"TÃ­tulo"}),e.jsx("input",{id:"title",type:"text",placeholder:"TÃ­tulo de la noticia",value:o.title,onChange:s=>a({...o,title:s.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"content",children:"Contenido"}),e.jsx("textarea",{id:"content",placeholder:"Contenido de la noticia",value:o.content,onChange:s=>a({...o,content:s.target.value}),required:!0,style:{minHeight:"150px"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"date",children:"Fecha"}),e.jsx("input",{id:"date",type:"date",value:o.date,onChange:s=>a({...o,date:s.target.value}),required:!0})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsx("button",{type:"submit",className:"btn btn-primary btn-block",disabled:l,children:l?"â³ Guardando...":h?"âœ“ Actualizar":"âœ“ Crear"}),h&&e.jsx("button",{type:"button",className:"btn btn-secondary btn-block",onClick:x,children:"âœ• Cancelar"})]})]})]}),e.jsxs("div",{className:"admin-card",children:[e.jsx("div",{className:"admin-card-header",children:e.jsxs("h2",{className:"admin-card-title",children:[" Noticias (",t.length,")"]})}),l?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{className:"empty-state-text",children:"Cargando..."})]}):t.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-state-icon"}),e.jsx("p",{className:"empty-state-text",children:"No hay noticias"})]}):e.jsx("div",{className:"admin-card-body",children:t.map(s=>e.jsxs("div",{className:"item-card",children:[e.jsx("div",{className:"item-header",children:e.jsxs("div",{children:[e.jsx("strong",{style:{color:"#f5c400"},children:s.title}),e.jsx("p",{style:{margin:"0.4rem 0 0 0",color:"#bbb",fontSize:"0.85rem"},children:s.date})]})}),e.jsxs("p",{style:{margin:"0.8rem 0",fontSize:"0.9rem",color:"#ddd",lineHeight:"1.5"},children:[s.content.substring(0,100),"..."]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{className:"btn btn-secondary btn-small",onClick:()=>r(s),disabled:l,children:"âœï¸ Editar"}),e.jsx("button",{className:"btn btn-danger btn-small",onClick:()=>g(s.id),disabled:l,children:"ðŸ—‘ Eliminar"})]})]},s.id))})]})]})}function K(){const[t,p]=c.useState([]),[h,d]=c.useState(null),[l,u]=c.useState(!1),[o,a]=c.useState({icon:"",content:"",active:!0}),m=async()=>{u(!0);const n=await _();p(n),u(!1)};c.useEffect(()=>{m()},[]);const x=async n=>{if(n.preventDefault(),u(!0),h)await S(h.id,o);else{const j=t.length>0?Math.max(...t.map(N=>N.position))+1:1;await q({...o,position:j})}a({icon:"",content:"",active:!0}),d(null),m()},f=n=>{d(n),a({icon:n.icon,content:n.content,active:n.active})},r=async n=>{window.confirm("Â¿Eliminar?")&&(u(!0),await D(n),m())},g=async n=>{u(!0),await S(n.id,{active:!n.active}),m()},s=async(n,j)=>{const N=n+j;if(N<0||N>=t.length)return;const i=t[n],b=t[N];u(!0),await S(i.id,{position:-1}),await S(b.id,{position:i.position}),await S(i.id,{position:b.position}),m()};return e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2rem"},children:[e.jsxs("div",{className:"admin-card",children:[e.jsx("div",{className:"admin-card-header",children:e.jsx("h2",{className:"admin-card-title",children:h?"âœï¸ Editar":" Nueva Extra"})}),e.jsxs("form",{className:"admin-form",onSubmit:x,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"icon",children:"Icono"}),e.jsx("input",{id:"icon",type:"text",placeholder:"Ej: ðŸ”¥ ðŸ“… âš¡",value:o.icon,onChange:n=>a({...o,icon:n.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"content",children:"Contenido"}),e.jsx("textarea",{id:"content",placeholder:"Contenido del anuncio",value:o.content,onChange:n=>a({...o,content:n.target.value}),required:!0,style:{minHeight:"100px"}})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.95rem",color:"#f5c400",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:o.active,onChange:n=>a({...o,active:n.target.checked})}),"Activo"]}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsx("button",{type:"submit",className:"btn btn-primary btn-block",disabled:l,children:l?"â³ Guardando...":h?"âœ“ Actualizar":"âœ“ Crear"}),h&&e.jsx("button",{type:"button",className:"btn btn-secondary btn-block",onClick:()=>{d(null),a({icon:"",content:"",active:!0})},children:"âœ• Cancelar"})]})]})]}),e.jsxs("div",{className:"admin-card",children:[e.jsx("div",{className:"admin-card-header",children:e.jsxs("h2",{className:"admin-card-title",children:[" Extra (",t.length,")"]})}),l?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{className:"empty-state-text",children:"Cargando..."})]}):t.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-state-icon"}),e.jsx("p",{className:"empty-state-text",children:"No hay extras"})]}):e.jsx("div",{className:"admin-card-body",children:t.map((n,j)=>e.jsxs("div",{className:"item-card",children:[e.jsx("div",{className:"item-header",children:e.jsxs("div",{children:[e.jsxs("strong",{style:{color:"#f5c400",fontSize:"1.1rem"},children:[n.icon," ",n.content.substring(0,40),"..."]}),!n.active&&e.jsx("span",{className:"badge badge-inactive",children:"Inactivo"})]})}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[e.jsx("button",{className:"btn btn-secondary btn-small",onClick:()=>s(j,-1),disabled:l||j===0,title:"Subir",children:"â¬†"}),e.jsx("button",{className:"btn btn-secondary btn-small",onClick:()=>s(j,1),disabled:l||j===t.length-1,title:"Bajar",children:"â¬‡"}),e.jsx("button",{className:"btn btn-success btn-small",onClick:()=>g(n),disabled:l,children:n.active?"ðŸ‘":"ðŸš«"}),e.jsx("button",{className:"btn btn-secondary btn-small",onClick:()=>f(n),disabled:l,children:"âœï¸"}),e.jsx("button",{className:"btn btn-danger btn-small",onClick:()=>r(n.id),disabled:l,children:"ðŸ—‘"})]})]},n.id))})]})]})}function J(){const[t,p]=c.useState([]),[h,d]=c.useState(null),[l,u]=c.useState(!1);c.useEffect(()=>{o()},[]);const o=async()=>{u(!0);const r=await R();p(r.fields),d(r.methodId),u(!1)},a=async r=>{u(!0),await E(r.id,{visible:!r.visible}),o()},m=async(r,g)=>{u(!0),await E(r,{field_value:g}),u(!1)},x=async(r,g)=>{const s=[...t],n=r+g;n<0||n>=s.length||([s[r],s[n]]=[s[n],s[r]],u(!0),p(s),await $(s),o())},f=async r=>{window.confirm("Â¿Eliminar campo?")&&(u(!0),await L(r),o())};return e.jsxs("div",{className:"admin-card",children:[e.jsx("div",{className:"admin-card-header",children:e.jsxs("h2",{className:"admin-card-title",children:[" Datos de DonaciÃ³n (",t.length,")"]})}),l?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{className:"empty-state-text",children:"Cargando..."})]}):t.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-state-icon"}),e.jsx("p",{className:"empty-state-text",children:"No hay campos"})]}):e.jsx("div",{className:"admin-card-body",children:t.map((r,g)=>e.jsxs("div",{className:"item-card",children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#f5c400",fontSize:"0.9rem"},children:r.field_key}),e.jsx("input",{type:"text",value:r.field_value,onChange:s=>m(r.id,s.target.value),disabled:l,style:{width:"100%",padding:"0.6rem",border:"1px solid #333",background:"#0d0d0d",color:"#f5f5f5",borderRadius:"4px",fontSize:"0.95rem"}})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[e.jsx("button",{className:"btn btn-secondary btn-small",onClick:()=>x(g,-1),disabled:l||g===0,title:"Subir",children:"â¬†"}),e.jsx("button",{className:"btn btn-secondary btn-small",onClick:()=>x(g,1),disabled:l||g===t.length-1,title:"Bajar",children:"â¬‡"}),e.jsx("button",{className:"btn btn-success btn-small",onClick:()=>a(r),disabled:l,children:r.visible?"ðŸ‘":"ðŸš«"}),e.jsx("button",{className:"btn btn-danger btn-small",onClick:()=>f(r.id),disabled:l,children:"ðŸ—‘"})]})]},r.id))})]})}function Q(){const[t,p]=c.useState([]),[h,d]=c.useState(!1),l=async()=>{d(!0);const{data:a,error:m}=await v.from("site_sections").select("*").order("position");if(m){console.error("Error loading sections:",m),d(!1);return}p(a),d(!1)};c.useEffect(()=>{l()},[]);const u=async a=>{d(!0),await v.from("site_sections").update({active:!a.active}).eq("id",a.id),l()},o=async(a,m)=>{const x=a+m;if(x<0||x>=t.length)return;const f=t[a],r=t[x];d(!0),await v.from("site_sections").update({position:-1}).eq("id",f.id),await v.from("site_sections").update({position:f.position}).eq("id",r.id),await v.from("site_sections").update({position:r.position}).eq("id",f.id),l()};return e.jsxs("div",{className:"admin-card",children:[e.jsx("div",{className:"admin-card-header",children:e.jsxs("h2",{className:"admin-card-title",children:[" Secciones del Sitio (",t.length,")"]})}),h?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{className:"empty-state-text",children:"Cargando..."})]}):t.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-state-icon"}),e.jsx("p",{className:"empty-state-text",children:"No hay secciones"})]}):e.jsx("div",{className:"admin-card-body",children:t.map((a,m)=>e.jsxs("div",{className:"item-card",children:[e.jsxs("div",{children:[e.jsx("strong",{style:{color:"#f5c400",fontSize:"1.05rem"},children:a.label}),e.jsx("p",{style:{color:"#999",fontSize:"0.85rem",margin:"0.3rem 0 0 0"},children:a.key}),!a.active&&e.jsx("span",{className:"badge badge-inactive",children:"Inactivo"})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[e.jsx("button",{className:"btn btn-secondary btn-small",onClick:()=>o(m,-1),disabled:h||m===0,title:"Subir",children:"â¬†"}),e.jsx("button",{className:"btn btn-secondary btn-small",onClick:()=>o(m,1),disabled:h||m===t.length-1,title:"Bajar",children:"â¬‡"}),e.jsx("button",{className:"btn btn-success btn-small",onClick:()=>u(a),disabled:h,children:a.active?"ðŸ‘":"ðŸš«"})]})]},a.id))})]})}function A(){const[t,p]=c.useState([]),[h,d]=c.useState(!1),l=async()=>{d(!0);const a=await P();p(a),d(!1)};c.useEffect(()=>{l()},[]);const u=async a=>{await B(a),l()},o=async a=>{window.confirm("Â¿Eliminar este mensaje?")&&(await H(a),l())};return e.jsx("div",{children:e.jsxs("div",{className:"admin-card",children:[e.jsx("div",{className:"admin-card-header",children:e.jsx("h2",{className:"admin-card-title",children:" Mensajes de Chat"})}),h?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{className:"empty-state-text",children:"Cargando mensajes..."})]}):t.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-state-icon"}),e.jsx("p",{className:"empty-state-text",children:"No hay mensajes"})]}):e.jsx("div",{className:"admin-card-body",children:t.map(a=>e.jsxs("div",{className:"message-item",children:[e.jsxs("div",{className:"message-header",children:[e.jsx("strong",{style:{color:"#f5c400"},children:a.name}),e.jsx("span",{style:{fontSize:"0.85rem",color:"#bbb"},children:a.email})]}),e.jsx("p",{style:{margin:"0.8rem 0",lineHeight:"1.6"},children:a.message}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[!a.read&&e.jsx("button",{className:"btn btn-success btn-small",onClick:()=>u(a.id),children:"âœ“ Marcar leÃ­do"}),a.read&&e.jsx("span",{className:"badge badge-active",children:"LeÃ­do"}),e.jsx("button",{className:"btn btn-danger btn-small",onClick:()=>o(a.id),children:"ðŸ—‘ Eliminar"})]})]},a.id))})]})})}function X(){const[t,p]=c.useState(""),[h,d]=c.useState(!0),[l,u]=c.useState(!1),[o,a]=c.useState(""),m=c.useRef(null);c.useEffect(()=>{x()},[]);const x=async()=>{d(!0);try{console.log("ðŸ“– AboutAdmin: Cargando contenido...");const s=await G();console.log("ðŸ“– AboutAdmin: Contenido recibido:",s?.substring(0,100)),p(s)}catch(s){console.error("ðŸ“– AboutAdmin: Error al cargar:",s),a("âŒ Error al cargar el contenido: "+s.message)}finally{d(!1)}},f=async s=>{s.preventDefault(),u(!0),a("");try{console.log("ðŸ’¾ AboutAdmin: Guardando contenido...",{length:t.length}),await U(t),console.log("ðŸ’¾ AboutAdmin: Guardado exitoso"),a(" Contenido actualizado correctamente"),setTimeout(()=>a(""),3e3)}catch(n){console.error("ðŸ’¾ AboutAdmin: Error al guardar:",n),a("âŒ Error al guardar: "+n.message)}finally{u(!1)}},r=s=>{const n=m.current;if(!n)return;const j=n.selectionStart,N=n.selectionEnd,i=t.substring(j,N);if(i){const b=t.substring(0,j),C=t.substring(N),y=`${b}<${s}>${i}</${s}>${C}`;p(y),setTimeout(()=>{n.focus();const w=j+s.length+2+i.length;n.setSelectionRange(w,w)},0)}},g=(s,n="")=>{const j=m.current;if(!j)return;const N=j.selectionStart,i=j.selectionEnd,b=t.substring(0,N),C=t.substring(i),y=`${b}${s}${n}${C}`;p(y),setTimeout(()=>{j.focus();const w=N+s.length;j.setSelectionRange(w,w)},0)};return h?e.jsx("div",{className:"admin-loading",children:"Cargando..."}):e.jsxs("div",{className:"admin-card",children:[e.jsx("div",{className:"admin-card-header",children:e.jsx("h2",{className:"admin-card-title",children:" Editar Acerca de"})}),e.jsxs("div",{className:"admin-preview",children:[e.jsx("h3",{children:"Vista Previa"}),e.jsx("div",{className:"about-preview-content",dangerouslySetInnerHTML:{__html:t}})]}),e.jsxs("form",{onSubmit:f,className:"admin-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"about-content",children:"Contenido HTML"}),e.jsxs("div",{className:"text-editor-toolbar",children:[e.jsx("button",{type:"button",onClick:()=>r("strong"),title:"Negrita",className:"toolbar-btn",children:e.jsx("strong",{children:"B"})}),e.jsx("button",{type:"button",onClick:()=>r("em"),title:"Cursiva",className:"toolbar-btn",children:e.jsx("em",{children:"I"})}),e.jsx("button",{type:"button",onClick:()=>r("s"),title:"Tachado",className:"toolbar-btn",children:e.jsx("s",{children:"S"})}),e.jsx("span",{className:"toolbar-divider",children:"|"}),e.jsx("button",{type:"button",onClick:()=>r("h2"),title:"TÃ­tulo 2",className:"toolbar-btn",children:"H2"}),e.jsx("button",{type:"button",onClick:()=>r("h3"),title:"TÃ­tulo 3",className:"toolbar-btn",children:"H3"}),e.jsx("button",{type:"button",onClick:()=>r("p"),title:"PÃ¡rrafo",className:"toolbar-btn",children:"P"}),e.jsx("span",{className:"toolbar-divider",children:"|"}),e.jsx("button",{type:"button",onClick:()=>g("<br>"),title:"Salto de lÃ­nea",className:"toolbar-btn",children:"BR"}),e.jsx("button",{type:"button",onClick:()=>g("<small>","</small>"),title:"Texto pequeÃ±o",className:"toolbar-btn",children:e.jsx("small",{children:"small"})})]}),e.jsx("textarea",{ref:m,id:"about-content",value:t,onChange:s=>p(s.target.value),rows:20,className:"admin-textarea",placeholder:"Escribe el contenido en HTML..."}),e.jsx("small",{className:"form-hint",children:"Selecciona texto y usa la barra de herramientas para aplicar formato HTML"})]}),o&&e.jsx("div",{className:`admin-message ${o.includes("")?"success":"error"}`,children:o}),e.jsxs("div",{className:"admin-actions",children:[e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:l,children:l?"Guardando...":"ðŸ’¾ Guardar Cambios"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:x,disabled:l,children:"ðŸ”„ Recargar"})]})]})]})}const Y=[{id:"chat",label:"Chat",icon:""},{id:"photos",label:"Fotos",icon:""},{id:"sections",label:"Secciones",icon:""},{id:"about",label:"Acerca de",icon:""},{id:"news",label:"Noticias",icon:""},{id:"extra-news",label:"Extra",icon:""},{id:"donation",label:"Donaciones",icon:""}];function ie(){const[t,p]=c.useState("chat"),h=()=>{switch(t){case"chat":return e.jsx(A,{});case"photos":return e.jsx(V,{});case"sections":return e.jsx(Q,{});case"about":return e.jsx(X,{});case"news":return e.jsx(O,{});case"extra-news":return e.jsx(K,{});case"donation":return e.jsx(J,{});default:return e.jsx(A,{})}};return e.jsxs("div",{className:"admin-layout-modern",children:[e.jsx(W,{activeTab:t,setActiveTab:p}),e.jsxs("div",{className:"admin-container",children:[e.jsx("aside",{className:"admin-sidebar",children:e.jsx("nav",{className:"admin-nav",children:Y.map(d=>e.jsxs("button",{className:`admin-nav-item ${t===d.id?"active":""}`,onClick:()=>p(d.id),title:d.label,children:[e.jsx("span",{className:"nav-icon",children:d.icon}),e.jsx("span",{className:"nav-label",children:d.label})]},d.id))})}),e.jsx("main",{className:"admin-content-modern",children:e.jsx("div",{className:"content-wrapper",children:h()})})]})]})}export{ie as default};
